webpackJsonp([22],{540:function(e,t,a){a(765);var r=a(196)(a(597),a(713),"data-v-6bf71724",null);e.exports=r.exports},597:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{loading:!0,agentOptions:"",brokerOptions:"",operationOptios:"",sform:{orderNo:"",startTime:"",endTime:"",agentName:"",brokerName:"",operationName:""},newform:{nickname:""},types:[{id:"1",name:"代理商"},{id:"",name:"经纪人"}],createcodeform:{pathAndName:""},rules:{userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},url:"user/sightOfCarrieroperator",agentUrl:"user/selectByAgentMessage",brokeUrl:"user/selectByBrokerMessage",saveQRCodeUrl:"user/generateQRCode",createQRCodeUrl:"user/createQRCode",addUrl:"user/insertAgent",deleteUrl:"user/deleteUser",dialogFormVisibleAdd:!1,dialogFormVisibleDelete:!1,dialogFormVisibleCreateCode:!1,currentPage:0,pageSize:10,pageNum:1,totalNum:0,tableData:[],formLabelWidth:"120px",userId:""}},created:function(){this.loadData(10,1)},methods:{onSubmit:function(e){var t=new URLSearchParams,a=this,r="",i="";""!=e.startTime&&(r=this.dateFormat(e.startTime)),""!=e.endTime&&(i=this.dateFormat(e.endTime)),""!=e.userType&&void 0!=e.userType&&e.userType,t.append("pageSize",this.pageSize),t.append("pageNum",this.currentPage),t.append("startTime",r),t.append("endTime",i),t.append("pid",this.isNotEmpty(e.agentName)?Number(e.agentName):""),axios.post(this.url,t).then(function(e){if(1001==e.data.code){a.$message({message:"查询成功",type:"success"});e.data.data.list;a.currentPage=0==e.data.data.pageNum?1:e.data.data.pageNum,a.pageSize=e.data.data.pageSize,a.pageNum=e.data.data.pages,a.totalNum=e.data.data.total,a.tableData=e.data.data.list}else a.$message({message:"查询失败",type:"warning"})}).catch(function(e){})},loadData:function(e,t){var a=new URLSearchParams,r="",i="";""!=this.sform.startTime&&(r=this.dateFormat(this.sform.startTime)),""!=this.sform.endTime&&(i=this.dateFormat(this.sform.endTime)),""!=this.sform.type&&void 0!=this.sform.type&&this.sform.userType,this.pageSize=e,this.currentPage=t,a.append("pageSize",this.pageSize),a.append("pageNum",this.currentPage),a.append("startTime",r),a.append("endTime",i),a.append("agentName",this.isNotEmpty(this.sform.agentName)?Number(sform.agentName):"");var s=this;axios.post(this.url,a).then(function(e){if(1001==e.data.code){var t=e.data.data.list;s.currentPage=0==e.data.data.pageNum?1:e.data.data.pageNum,s.pageSize=e.data.data.pageSize,s.totalNum=e.data.data.total,s.tableData=t}}).catch(function(e){})},deleteDialog:function(e,t){this.dialogFormVisibleDelete=!0,this.row=t},createCode:function(e,t){var a=document.location.hostname,r=document.location.port;console.log(a),this.row=t,this.createcodeform={pathAndName:"http://"+a+":"+r+"/user/createQRCode?userName="+t.userName+"&id="+t.id},this.dialogFormVisibleCreateCode=!0},saveCodePicture:function(){var e=new URLSearchParams,t=this;e.append("userName",t.row.userName),e.append("id",t.row.id),window.location=this.saveQRCodeUrl+"?"+e,t.$message({message:"保存成功",type:"success"}),this.dialogFormVisibleCreateCode=!1},handleDelete:function(){var e=this,t=new URLSearchParams;t.append("id",e.row.id),axios.post(this.deleteUrl,t).then(function(t){1==t.data.msg?(e.$message({message:"删除成功",type:"success"}),e.dialogFormVisibleDelete=!1,e.loadData(e.pageSize,e.currentPage)):0===t.data.msg?(e.$message({message:"删除失败",type:"warning"}),e.dialogFormVisibleDelete=!1):(e.dialogFormVisibleDelete=!1,e.$message.error("网络错误"))}).catch(function(e){})},getBrokerOptions:function(){var e=this;e.sform.brokerName="";var t=new URLSearchParams;t.append("pid",Number(e.sform.agentName)),axios.post(e.brokeUrl,t).then(function(t){e.brokerOptions=t.data.data}).catch(function(e){console.log(e)})},jdType:function(e){return 1==e.pid?"代理商":null!=e.pid?"经纪人":"管理员"},resetForm:function(e){this.$refs.sform.resetFields()},resetForm1:function(e){this.$refs[e].resetFields(),this.dialogFormVisibleAdd=!1},addAgent:function(){this.newform={userName:""},this.dialogFormVisibleAdd=!0},confirmAddAgent:function(e){var t=this,a=new URLSearchParams;a.append("userName",this.newform.userName),a.append("password",this.newform.password),a.append("phone",this.newform.phone);var r=this;this.$refs[e].validate(function(i){i?(t.$refs[e].resetFields(),axios.post(t.addUrl,a).then(function(e){1==e.data.data?(r.$message({message:"添加成功",type:"success"}),r.loadData(r.pageSize,r.pageNum),r.dialogFormVisibleAdd=!1):-1==e.data.data?(r.$message({message:"账户已存在",type:"warning"}),r.dialogFormVisibleAdd=!1):(r.$message.error("网络错误"),r.dialogFormVisibleAdd=!1)})):(console.log("error submit!!"),t.$refs[e].resetFields())})},handleCurrentChange:function(e){this.loadData(this.pageSize,e)},handleSizeChange:function(e){this.loadData(e,1)},dateFormat:function(e){var t=new Date(e),a=t.getFullYear(),r=t.getMonth()+1;r=r<10?"0"+r:r;var i=t.getDate();i=i<10?"0"+i:i;var s=t.getHours();s=s<10?"0"+s:s;var o=t.getMinutes(),l=t.getSeconds();return o=o<10?"0"+o:o,l=l<10?"0"+l:l,a+"-"+r+"-"+i+" "+s+":"+o+":"+l}}}},650:function(e,t,a){t=e.exports=a(135)(void 0),t.push([e.i,"img[data-v-6bf71724]{wdith:200px;height:200px;display:block;margin:0 auto}",""])},713:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"content"}},[e._m(0,!1,!1),e._v(" "),a("div",{staticClass:"container-fluid"},[a("el-form",{ref:"sform",attrs:{inline:!0,"demo-form-inline":"",model:e.sform,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"创建时间：",prop:"startTime"}},[a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{size:"small",type:"datetime",placeholder:"选择日期时间",align:"right"},model:{value:e.sform.startTime,callback:function(t){e.$set(e.sform,"startTime",t)},expression:"sform.startTime"}})],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"endTime"}},[a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{size:"small",type:"datetime",placeholder:"选择日期时间",align:"right"},model:{value:e.sform.endTime,callback:function(t){e.$set(e.sform,"endTime",t)},expression:"sform.endTime"}})],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.onSubmit(e.sform)}}},[e._v("查询")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){e.resetForm(e.sform)}}},[e._v("清除")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){e.addAgent()}}},[e._v("新建经纪人")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"auto",display:"inline-block"},attrs:{data:e.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"商户名",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",formatter:e.jdType,label:"类型",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"agentName",label:"代理商",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.createCode(t.$index,t.row)}}},[e._v("生成二维码")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.deleteDialog(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加",visible:e.dialogFormVisibleAdd,center:"",width:"30%"},on:{"update:visible":function(t){e.dialogFormVisibleAdd=t}}},[a("el-form",{ref:"newform",attrs:{model:e.newform,rules:e.rules}},[a("el-form-item",{attrs:{label:"商户名","label-width":e.formLabelWidth,prop:"userName"}},[a("el-input",{attrs:{size:"small","auto-complete":"off"},model:{value:e.newform.userName,callback:function(t){e.$set(e.newform,"userName",t)},expression:"newform.userName"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.resetForm1("newform")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.confirmAddAgent("newform")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"",visible:e.dialogFormVisibleCreateCode,center:"",width:"30%"},on:{"update:visible":function(t){e.dialogFormVisibleCreateCode=t}}},[a("el-form",{attrs:{model:e.createcodeform}},[a("el-form-item",{attrs:{label:"","label-width":e.formLabelWidth}},[a("img",{attrs:{src:e.createcodeform.pathAndName}})])],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisibleCreateCode=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.saveCodePicture}},[e._v("保存图片")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"确认删除？",center:"",width:"30%",visible:e.dialogFormVisibleDelete},on:{"update:visible":function(t){e.dialogFormVisibleDelete=t}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisibleDelete=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleDelete}},[e._v("确 定")])],1)])],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"content-header"}},[a("div",{attrs:{id:"breadcrumb"}},[a("a",{staticClass:"tip-bottom",attrs:{href:"javascript:;",title:"Go to Home"}},[a("i",{staticClass:"icon-home"}),e._v(" 合作伙伴")]),e._v(" "),a("a",{staticClass:"current",attrs:{href:"javascript:;"}},[e._v("商户管理")])]),e._v(" "),a("h1")])}]}},765:function(e,t,a){var r=a(650);"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a(197)("0d0491e6",r,!0)}});