webpackJsonp([17],{549:function(e,t,a){a(780);var s=a(196)(a(610),a(724),"data-v-6f1f7184",null);e.exports=s.exports},610:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{loading:!0,types:[{id:1,name:"公司"},{id:2,name:"非公司"}],actorList:"",form:{username:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""},newform:{username:"",password:"",actor1:"",type:""},newformEdit:{username:"",password:"",actor:"",type:""},url:"user/selectByUsers",actorUrl:"role/selectByRoleAll",addUrl:"user/insertUser",editUrl:"user/updateUser",deleteUrl:"user/deleteUser",currentPage:0,pagesize:10,pageNum:1,totalNum:0,tableData:[],dialogFormVisible:!1,dialogFormVisibleEdit:!1,dialogFormVisibleDelete:!1,formLabelWidth:"120px",userId:"",rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],actor1:[{required:!0,message:"请选择角色",trigger:"blur"}],type:[{required:!0,message:"请选择类型",trigger:"blur"}]}}},created:function(){this.loadData(10,1);var e=this;axios.get(this.actorUrl).then(function(t){e.actorList=t.data}).catch(function(e){self.$router.push("/login"),console.log(e)})},methods:{onSubmit:function(e){var t=new URLSearchParams,a=this,s="",r="",i="";i=void 0==e.username?"":e.username,""!=e.date1&&(s=Date.parse(e.date1)),""!=e.date2&&(r=Date.parse(e.date2)),t.append("pageSize",this.pagesize),t.append("pageNum",this.currentPage),t.append("phone",i),t.append("startTime",s),t.append("endTime",r),axios.post(this.url,t).then(function(e){a.$message({message:"查询成功",type:"success"}),a.currentPage=e.data.data.pageNum,a.pagesize=e.data.data.pageSize,a.pageNum=e.data.data.pages,a.totalNum=e.data.data.total,a.tableData=e.data.data.list}).catch(function(e){self.$router.push("/login")})},resetForm:function(){this.$refs.form.resetFields(),this.loadData(10,1)},add:function(){this.newform={username:"",password:"",actor1:"",type:""},this.dialogFormVisible=!0},confirmAdd:function(e){var t=this,a=new URLSearchParams;a.append("password",this.newform.password),a.append("userName",this.newform.username),a.append("type",this.newform.type),a.append("rids",this.newform.actor1);var s=this;this.$refs[e].validate(function(r){r&&(t.$refs[e].resetFields(),axios.post(s.addUrl,a).then(function(e){1==e.data.data.msg?(s.$message({message:"添加成功",type:"success"}),s.dialogFormVisible=!1,s.loadData(s.pagesize,1)):-1==e.data.data.msg?(s.$message({message:"账户已存在",type:"warning"}),s.dialogFormVisible=!1):(s.$message.error("网络错误"),s.dialogFormVisible=!1)}))})},handleEdit:function(e,t){this.newformEdit={username:t.userName,password:"",actor:t.rid,type:null!=t.pid?2:1},this.userId=t.id,this.dialogFormVisibleEdit=!0},confirmAddEdit:function(){var e=new URLSearchParams;e.append("password",this.newformEdit.password),e.append("userName",this.newformEdit.username),e.append("rids",this.newformEdit.actor),e.append("type",this.newformEdit.type),e.append("id",this.userId);var t=this;axios.post(this.editUrl,e).then(function(e){1==e.data.data.msg?(t.$message({message:"修改成功",type:"success"}),t.dialogFormVisibleEdit=!1,t.loadData(t.pagesize,1)):0==e.data.data.msg?(t.$message({message:"修改失败",type:"warning"}),t.dialogFormVisibleEdit=!1):(t.dialogFormVisibleEdit=!1,t.$message.error("网络错误"))}).catch(function(e){self.$router.push("/login"),t.dialogFormVisibleEdit=!1,t.$message.error("网络错误")})},deleDialog:function(e,t){this.dialogFormVisibleDelete=!0,this.row=t},handleDelete:function(){var e=this,t=new URLSearchParams;t.append("id",e.row.id),axios.post(this.deleteUrl,t).then(function(t){1==t.data.data.msg?(e.$message({message:"删除成功",type:"success"}),e.dialogFormVisibleDelete=!1,e.loadData(e.pagesize,1)):0==t.data.data.msg?(e.$message({message:"删除失败",type:"warning"}),e.dialogFormVisibleDelete=!1):(e.dialogFormVisibleDelete=!1,e.$message.error("网络错误"))}).catch(function(e){self.$router.push("/login")})},loadData:function(e,t){var a=new URLSearchParams,s="",r="",i="";i=void 0==this.form.username?"":this.form.username,""!=this.form.date1&&(s=Date.parse(this.form.date1)),""!=this.form.date2&&(r=Date.parse(this.form.date2)),this.pagesize=e,this.currentPage=t,a.append("pageSize",this.pagesize),a.append("pageNum",this.currentPage),a.append("phone",i),a.append("startTime",s),a.append("endTime",r);var l=this;axios.post(this.url,a).then(function(e){l.currentPage=e.data.data.pageNum,l.pagesize=e.data.data.pageSize,l.pageNum=e.data.data.pages,l.totalNum=e.data.data.total,l.tableData=e.data.data.list}).catch(function(e){self.$router.push("/login")})},handleCurrentChange:function(e){this.loadData(this.pagesize,e)},handleSizeChange:function(e){this.loadData(e,1)}}}},657:function(e,t,a){t=e.exports=a(135)(void 0),t.push([e.i,"",""])},724:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"content"}},[e._m(0,!1,!1),e._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"formBox"},[a("el-form",{ref:"form",attrs:{inline:!0,"demo-form-inline":"",model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{size:"small"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"创建时间"}},[a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{size:"small",type:"datetime",placeholder:"选择日期时间",align:"right"},model:{value:e.form.date1,callback:function(t){e.$set(e.form,"date1",t)},expression:"form.date1"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{prop:"date2"}},[a("el-col",{attrs:{span:10}},[a("el-date-picker",{attrs:{size:"small",type:"datetime",placeholder:"选择日期时间",align:"right"},model:{value:e.form.date2,callback:function(t){e.$set(e.form,"date2",t)},expression:"form.date2"}})],1)],1),e._v(" "),a("br"),e._v("  \n                "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.onSubmit(e.form)}}},[e._v("查询\n                    ")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(t){e.resetForm(e.form)}}},[e._v("清除\n                    ")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"small",type:"success"},on:{click:e.add}},[e._v("新增用户")])],1)],1)],1),e._v(" "),a("div",{staticClass:"tableBox"},[a("el-table",{staticStyle:{width:"auto",display:"inline-block"},attrs:{data:e.tableData,fit:"",border:"",stripe:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"rname",label:"角色",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建时间",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                        ")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.deleDialog(t.$index,t.row)}}},[e._v("删除\n                        ")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"paginationBox"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalNum},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"新增用户",visible:e.dialogFormVisible,center:"",width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"newform",attrs:{model:e.newform,rules:e.rules}},[a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth,prop:"username"}},[a("el-input",{attrs:{size:"small","auto-complete":"off"},model:{value:e.newform.username,callback:function(t){e.$set(e.newform,"username",t)},expression:"newform.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth,prop:"password"}},[a("el-input",{attrs:{size:"small","auto-complete":"off"},model:{value:e.newform.password,callback:function(t){e.$set(e.newform,"password",t)},expression:"newform.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色","label-width":e.formLabelWidth,prop:"actor1"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.newform.actor1,callback:function(t){e.$set(e.newform,"actor1",t)},expression:"newform.actor1"}},e._l(e.actorList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+""}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth,prop:"type"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.newform.type,callback:function(t){e.$set(e.newform,"type",t)},expression:"newform.type"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id+""}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.confirmAdd("newform")}}},[e._v("确 定\n                ")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑用户",center:"",width:"30%",visible:e.dialogFormVisibleEdit},on:{"update:visible":function(t){e.dialogFormVisibleEdit=t}}},[a("el-form",{attrs:{model:e.newformEdit}},[a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{size:"small","auto-complete":"off"},model:{value:e.newformEdit.username,callback:function(t){e.$set(e.newformEdit,"username",t)},expression:"newformEdit.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{size:"small","auto-complete":"off"},model:{value:e.newformEdit.password,callback:function(t){e.$set(e.newformEdit,"password",t)},expression:"newformEdit.password"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"角色","label-width":e.formLabelWidth}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.newformEdit.actor,callback:function(t){e.$set(e.newformEdit,"actor",t)},expression:"newformEdit.actor"}},e._l(e.actorList,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"类型","label-width":e.formLabelWidth}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.newformEdit.type,callback:function(t){e.$set(e.newformEdit,"type",t)},expression:"newformEdit.type"}},e._l(e.types,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisibleEdit=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.confirmAddEdit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"确认删除？",center:"",width:"30%",visible:e.dialogFormVisibleDelete},on:{"update:visible":function(t){e.dialogFormVisibleDelete=t}}},[a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogFormVisibleDelete=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleDelete}},[e._v("确 定")])],1)])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"content-header"}},[a("div",{attrs:{id:"breadcrumb"}},[a("a",{staticClass:"tip-bottom",attrs:{href:"javascript:;",title:"Go to Home"}},[a("i",{staticClass:"icon-home"}),e._v(" 系统管理")]),e._v(" "),a("a",{staticClass:"current",attrs:{href:"javascript:;"}},[e._v("账号管理")])])])}]}},780:function(e,t,a){var s=a(657);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);a(197)("1d26b392",s,!0)}});